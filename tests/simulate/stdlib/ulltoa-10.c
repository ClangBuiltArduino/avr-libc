#ifdef __AVR_TINY__
int main (void)
{
  return 0;
}
#else

#include <stdint.h>
#include <stdlib.h>
#include <avr/flash.h>

static char buf[30];

__attribute__((__noreturn__,noipa))
void bad (const __flash char *soll, const char *ist)
{
  (void) soll;
  (void) ist;
  __builtin_abort();
}

#define ARRAY_SIZE(X) ((int) (sizeof (X) / sizeof (*X)))

typedef struct
{
  uint64_t num;
  const __flash char *str;
} data_u64_t;

#define _(X)                                    \
  { UINT64_C(X), FLIT (#X) }

static const __flash data_u64_t data_u64[] =
  {
    _(0), _(1),
    _(9), _(10),
    _(99), _(100),
    _(999), _(1000),
    _(9999), _(10000),
    _(99999), _(100000),
    _(999999), _(1000000),
    _(9999999), _(10000000),
    _(99999999), _(100000000),
    _(999999999), _(1000000000),
    _(9999999999), _(10000000000),
    _(99999999999), _(100000000000),
    _(999999999999), _(1000000000000),
    _(9999999999999), _(10000000000000),
    _(99999999999999), _(100000000000000),
    _(999999999999999), _(1000000000000000),
    _(9999999999999999), _(10000000000000000),
    _(99999999999999999), _(100000000000000000),
    _(999999999999999999), _(10000000000000000000),
    _(2147483647), _(2147483648), _(2147483649),
    _(4294967295), _(4290000000),
    _(1999999999), _(3999999999), _(2000000000), _(4000000000),
    _(4294967295),
    _(9223372036854775807), _(9223372036854775808), _(9223372036854775809),
    _(18446744073709551615),
    _(17999999999999999999), _(18000000000000000000),
    _(17999999999999999990), _(18000000000000000001),
  };

void test_u64 (void)
{
  int i;
  for (i = 0; i < ARRAY_SIZE (data_u64); ++i)
    {
      uint64_t num = data_u64[i].num;
      ulltoa (num, buf, 10);
      const __flash char* soll = data_u64[i].str;
      if (strcmp_F (buf, soll))
        bad (soll, buf);
    }
}

int main (void)
{
  test_u64();
  return 0;
}
#endif /* !AVR_TINY */
