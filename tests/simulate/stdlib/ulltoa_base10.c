#include <stdint.h>
#include <stdlib.h>
#include <string.h>

static char buf1[25];
static char buf2[25];

#define ARRAY_SIZE(X) ((int) (sizeof (X) / sizeof (*X)))

#define _(X)  UINT64_C(X)

static const __flash uint64_t data_u64[] =
  {
    _(0), _(1),
    _(9), _(10),
    _(99), _(100),
    _(999), _(1000),
    _(9999), _(10000),
    _(99999), _(100000),
    _(999999), _(1000000),
    _(9999999), _(10000000),
    _(99999999), _(100000000),
    _(999999999), _(1000000000),
    _(9999999999), _(10000000000),
    _(99999999999), _(100000000000),
    _(999999999999), _(1000000000000),
    _(9999999999999), _(10000000000000),
    _(99999999999999), _(100000000000000),
    _(999999999999999), _(1000000000000000),
    _(9999999999999999), _(10000000000000000),
    _(99999999999999999), _(100000000000000000),
    _(999999999999999999), _(10000000000000000000),
    _(2147483647), _(2147483648), _(2147483649),
    _(4294967295), _(4290000000),
    _(1999999999), _(3999999999), _(2000000000), _(4000000000),
    _(4294967295),
    _(9223372036854775807), _(9223372036854775808), _(9223372036854775809),
    _(18446744073709551615),
    _(17999999999999999999), _(18000000000000000000),
    _(17999999999999999990), _(18000000000000000001),
  };

void test_u64 (void)
{
  int i;
  for (i = 0; i < ARRAY_SIZE (data_u64); ++i)
    {
      uint64_t num = data_u64[i];
      char *s1 = ulltoa (num, buf1, 10);
      char *s2 = ulltoa_base10 (num, buf2);
      if (strcmp (buf1, buf2))
        __builtin_abort();
      if (s1 - buf1 != s2 - buf2)
        __builtin_abort();
    }
}

int main (void)
{
  test_u64();
  return 0;
}
